{% extends 'tictactoe/base.html' %}
{% block title %}–ò–≥—Ä–∞{% endblock %}
{% block content %}
<h2>{{ game.player_x.name }} vs {{ game.player_o.name }}</h2>

{% if game.winner %}
    <h3>
        {% if game.winner == "D" %}
            ‚öñÔ∏è –ù–∏—á—å—è!
        {% elif game.winner == "X" %}
            üèÜ –ü–æ–±–µ–¥–∏—Ç–µ–ª—å: {{ game.player_x.name }}
        {% else %}
            üèÜ –ü–æ–±–µ–¥–∏—Ç–µ–ª—å: {{ game.player_o.name }}
        {% endif %}
    </h3>
{% else %}
    <h3>–•–æ–¥–∏—Ç: 
        {% if game.current_turn == "X" %}
            {{ game.player_x.name }}
        {% else %}
            {{ game.player_o.name }}
        {% endif %}
    </h3>
{% endif %}


<form method="post">
    {% csrf_token %}
    <table style="margin:auto; border-collapse: collapse;">
        {% for row in rows %}
        <tr>
            {% for idx, cell in row %}
            <td style="width:60px;height:60px;text-align:center;font-size:24px;">
                {% if cell %}
                    {{ cell }}
                {% elif not game.winner %}
                    <button name="cell" value="{{ idx }}">-</button>
                {% endif %}
            </td>
            {% endfor %}
        </tr>
        {% endfor %}
    </table>
</form>

{% if game.winner %}
    <br>
    <a href="{% url 'new_game_with_players' game.id %}">
        <button class="btn">–ù–æ–≤–∞—è –∏–≥—Ä–∞</button>
    </a>
{% endif %}

{% endblock %}

<style>
td button {
    width: 60px;
    height: 60px;
    font-size: 22px;
    background: rgba(255,255,255,0.2);
    color: #fff;
    border: none;
    border-radius: 8px;
    transition: background 0.3s, transform 0.2s;
}
td button:hover {
    background: #4CAF50;
    transform: scale(1.1);
}
.btn {
    padding: 10px 20px;
    margin: 5px;
    background: #ff5722;
    color: white;
    border: none;
    border-radius: 5px;
    cursor: pointer;
}
.btn:hover { background:#e64a19; }
</style>
